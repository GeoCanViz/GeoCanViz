(function(){define([],function(){var e,b,d,c=new esri.tasks.ProjectParameters(),a;b=function(g,i,h){var f=new esri.SpatialReference({wkid:h.outwkid});if(typeof a==="undefined"){a=new esri.tasks.GeometryService(h.urlgeomserv)}c.geometries=[g];c.outSR=f;a.project(c,function(j){g=j[0];dojo.byId(i).innerHTML=" Lat: "+g.y.toFixed(3)+" Long: "+g.x.toFixed(3)})};d=function(h,j,g){var f=new esri.SpatialReference({wkid:4326}),i=new esri.geometry.Point((h.xmin+h.xmax)/2,h.ymin,new esri.SpatialReference({wkid:g.inwkid}));c.geometries=[i];c.outSR=f;a.project(c,function(o){var l={x:-100,y:90},m,q,p,k,r,n;i=o[0];m=(i.x-l.x)*Math.PI/180;q=l.y*Math.PI/180;p=i.y*Math.PI/180;r=Math.sin(m)*Math.cos(p);k=Math.cos(q)*Math.sin(p)-Math.sin(q)*Math.cos(p)*Math.cos(m);n=Math.atan2(r,k)*180/Math.PI;n=((n+360)%360).toFixed(1)-90;dojo.byId(j).style.webkitTransform="rotate("+n+"deg)";dojo.byId(j).style.MozTransform="rotate("+n+"deg)";dojo.byId(j).style.msTransform="rotate("+n+"deg)";dojo.byId(j).style.OTransform="rotate("+n+"deg)";dojo.byId(j).style.transform="rotate("+n+"deg)"})};return{getCoord:b,getNorthAngle:d}})}());