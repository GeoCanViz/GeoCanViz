(function(){define([],function(){var f,c,b,e,j,i,h,a,d,l=[],g="",k;f=function(r,m){var n=m.extent,o=m.sr.wkid,n=new esri.geometry.Extent({xmin:n.xmin,ymin:n.ymin,xmax:n.xmax,ymax:n.ymax,spatialReference:{wkid:o}}),p,q;p=new esri.Map(r,{extent:n,spatialReference:{wkid:o},logo:false,showAttribution:false,isPanArrows:true,fitExtent:false});p.vInitExtent=n;q=r.split("_");p.vIdName=q[0];p.vIdIndex=Number(q[1]);if(m.link){l.push(p.vIdName);b(p)}return p};c=function(n){var o=n.target.vIdName,m=Number(n.target.vIdIndex);Object.keys(mapArray).forEach(function(q){if(q!==o&&l.indexOf(q)!=-1){var p=mapArray[q][0];p.setExtent(mapArray[o][m].extent,p.spatialReference)}})};b=function(m){m.on("extent-change",k(function(n){if(n.target.id===document.activeElement.id){c(n)}},1000,false))};k=function(p,m,n){var q;return function o(){var t=this,s=arguments;function r(){if(!n){p.apply(t,s)}q=null}if(q){clearTimeout(q)}else{if(n){p.apply(t,s)}}q=setTimeout(r,m||100)}};e=function(m){};j=function(o,n,m){if(n==="tiled"){o.addLayer(new esri.layers.ArcGISTiledMapServiceLayer(m))}else{if(n==="dynamic"){o.addLayer(new esri.layers.ArcGISDynamicMapServiceLayer(m))}}};i=function(p){var o=h(p),n,m=o.length;while(m--){n=o[m];n.resize();n.setExtent(n.getLayer(n.layerIds[0]).initialExtent,true)}};h=function(m){return mapArray[m]};a=function(){};d=function(){};return{createMap:f,addLayer:j,resizeMap:i}})}());