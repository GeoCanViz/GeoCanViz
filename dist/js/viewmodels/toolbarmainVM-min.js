(function(){define(["jquery","knockout","gcviz-i18n"],function(d,b,c){var a;a=function(g,f){var e=function(j,n){var o=this,p=locationPath+"/dist/images/mainFullscreen.png",k=locationPath+"/dist/images/mainSmallscreen.png",i=locationPath+"/dist/images/mainTools.png",q=locationPath+"/dist/images/mainHelp.png",l=d("#section"+n),h=d("#"+n),m=d("#"+n+"_0");o.counter=b.observable(0);o.imgFullscreen=b.observable(p);o.imgTools=i;o.imgHelp=q;o.errorHandler=function(r){console.log("error toolbar main view model: ",r)};o.init=function(){o.heightSection=l.css("height");o.widthSection=l.css("width");o.heightMap=m.css("height");o.widthMap=m.css("width");d(document).on("keyup",function(r){if(r.keyCode===27){o.cancelFullScreen(document,n);o.imgFullscreen(p)}});return{controlsDescendantBindings:true}};o.fullscreenClick=function(){var r=(document.fullScreenElement&&document.fullScreenElement!==null)||(document.mozFullScreen||document.webkitIsFullScreen);if(r){o.cancelFullScreen(document,n);o.imgFullscreen(p)}else{o.requestFullScreen(l[0],n);o.imgFullscreen(k)}};o.toolsClick=function(){var r=h.find(".toolbars-holder");if(r.hasClass("hidden")){r.removeClass("hidden")}else{r.addClass("hidden")}};o.helpClick=function(){o.counter(o.counter()+1);alert(c.getDict("%toolbarmain-help")+": "+o.counter())};o.cancelFullScreen=function(s,r){var u=s.cancelFullScreen||s.webkitCancelFullScreen||s.mozCancelFullScreen||s.exitFullscreen;if(u){u.call(s)}else{if(typeof window.ActiveXObject!=="undefined"){var t=new ActiveXObject("WScript.Shell");if(t!==null){t.SendKeys("{F11}")}}}h.css({width:o.widthSection,height:o.heightSection});m.css({width:o.widthMap,height:o.heightMap})};o.requestFullScreen=function(s,r){var u=s.requestFullScreen||s.webkitRequestFullScreen||s.mozRequestFullScreen||s.msRequestFullScreen;if(u){u.call(s)}else{if(typeof window.ActiveXObject!=="undefined"){var t=new ActiveXObject("WScript.Shell");if(t!==null){t.SendKeys("{F11}")}}}s.getElementsByClassName("gcviz")[0].setAttribute("style","width: 100%; height: 93%;");s.getElementsByClassName("map")[0].setAttribute("style","width: 100%; height: 100%;")};o.init()};b.applyBindings(new e(g,f),g[0])};return{initialize:a}})}).call(this);